<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.92.0" />
    <meta name="description" content="ECVM documentation">
<meta name="author" content="ARS Tuscany">

    <link rel="icon" href="../../images/favicon.png" type="image/png">

    <title>Actions in each step :: ECVM documentation</title>

    
    <link href="../../css/nucleus.css?1644326232" rel="stylesheet">
    <link href="../../css/fontawesome-all.min.css?1644326232" rel="stylesheet">
    <link href="../../css/hybrid.css?1644326232" rel="stylesheet">
    <link href="../../css/featherlight.min.css?1644326232" rel="stylesheet">
    <link href="../../css/perfect-scrollbar.min.css?1644326232" rel="stylesheet">
    <link href="../../css/auto-complete.css?1644326232" rel="stylesheet">
    <link href="../../css/atom-one-dark-reasonable.css?1644326232" rel="stylesheet">
    <link href="../../css/theme.css?1644326232" rel="stylesheet">
    <link href="../../css/tabs.css?1644326232" rel="stylesheet">
    <link href="../../css/hugo-theme.css?1644326232" rel="stylesheet">
    
    <link href="../../css/theme-green.css?1644326232" rel="stylesheet">
    
    

    <script src="../../js/jquery-3.3.1.min.js?1644326232"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="../../en/actions-in-each-step/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="https://davidemessinaars.github.io/test_website/">
  <img src="../../data/ECVM logo.png">
</a>
    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="../../js/lunr.min.js?1644326232"></script>
<script type="text/javascript" src="../../js/auto-complete.js?1644326232"></script>
<script type="text/javascript">
    
        var baseurl = "\/\/en";
    
</script>
<script type="text/javascript" src="../../js/search.js?1644326232"></script>

    
  </div>
  
    <section id="homelinks">
      <ul>
        <li>
            <a class="padding" href='../../en'><i class='fas fa-home'></i> Home</a>
        </li>
      </ul>
    </section>
  

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/en/introduction/" title="Introduction" class="dd-item
        
        
        
        ">
      <a href="../../en/introduction/">
          <b>1. </b>Introduction
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/en/data-models/" title="Data Models" class="dd-item
        
        
        
        ">
      <a href="../../en/data-models/">
          <b>2. </b>Data Models
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/en/data-models/code-counts/" title="Code counts" class="dd-item ">
        <a href="../../en/data-models/code-counts/">
        Code counts
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/data-models/dashboard/" title="Dashboard" class="dd-item ">
        <a href="../../en/data-models/dashboard/">
        Dashboard
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/data-models/descriptives-study-population/" title="Descriptives study population" class="dd-item ">
        <a href="../../en/data-models/descriptives-study-population/">
        Descriptives study population
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/data-models/descriptives-study-population-at-vaccination/" title="Descriptives study population at vaccination" class="dd-item ">
        <a href="../../en/data-models/descriptives-study-population-at-vaccination/">
        Descriptives study population at vaccination
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/data-models/doses-of-vaccination/" title="Doses of vaccination" class="dd-item ">
        <a href="../../en/data-models/doses-of-vaccination/">
        Doses of vaccination
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/data-models/final-tables/" title="Final tables" class="dd-item ">
        <a href="../../en/data-models/final-tables/">
        Final tables
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/data-models/flowcharts/" title="Flowcharts" class="dd-item ">
        <a href="../../en/data-models/flowcharts/">
        Flowcharts
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/data-models/incidence-rate/" title="Incidence rate" class="dd-item ">
        <a href="../../en/data-models/incidence-rate/">
        Incidence rate
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/data-models/initial-datasets/" title="Initial datasets" class="dd-item ">
        <a href="../../en/data-models/initial-datasets/">
        Initial datasets
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/data-models/main-datasets/" title="Main datasets" class="dd-item ">
        <a href="../../en/data-models/main-datasets/">
        Main datasets
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/data-models/persontime-benefits/" title="PersonTime benefits" class="dd-item ">
        <a href="../../en/data-models/persontime-benefits/">
        PersonTime benefits
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/data-models/persontime-monthly/" title="PersonTime monthly" class="dd-item ">
        <a href="../../en/data-models/persontime-monthly/">
        PersonTime monthly
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/en/data-models/persontime-risk/" title="PersonTime risk" class="dd-item ">
        <a href="../../en/data-models/persontime-risk/">
        PersonTime risk
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/en/structure-of-the-script/" title="Structure of the script" class="dd-item
        
        
        
        ">
      <a href="../../en/structure-of-the-script/">
          <b>3. </b>Structure of the script
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/en/actions-in-each-step/" title="Actions in each step" class="dd-item
        parent
        active
        
        ">
      <a href="../../en/actions-in-each-step/">
          <b>4. </b>Actions in each step
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/en/parameters/" title="Parameters" class="dd-item
        
        
        
        ">
      <a href="../../en/parameters/">
          <b>5. </b>Parameters
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/en/how-to-run-this-script/" title="How to run this script" class="dd-item
        
        
        
        ">
      <a href="../../en/how-to-run-this-script/">
          <b>6. </b>How to run this script
          
      </a>
      
      
    </li>
  
 

          
        
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li>
                  <a class="padding" href="https://ars-toscana.github.io/ECVM/data/ECVM.html"><i class="fas fa-project-diagram"></i> Diagram</a>
              </li>
          
              <li>
                  <a class="padding" href="https://github.com/ARS-toscana/ECVM"><i class='fab fa-fw fa-github'></i> GitHub repo</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      

      
      </ul>
    </section>
    
    <section id="footer">
      <center>
    
    <a class="github-button" href="https://github.com/ARS-toscana/ECVM/archive/refs/heads/main.zip" data-icon="octicon-cloud-download" aria-label="Download ARS-toscana/ECVM on GitHub">Download</a>

    
    <a class="github-button" href="https://github.com/ARS-toscana/ECVM" data-icon="octicon-star" data-show-count="true" aria-label="Star ARS-toscana/ECVM on GitHub">Star</a>

    
    <a class="github-button" href="https://github.com/ARS-toscana/ECVM/fork" data-icon="octicon-repo-forked" data-show-count="true" aria-label="Fork ARS-toscana/ECVM on GitHub">Fork</a>



<script async defer src="https://buttons.github.io/buttons.js"></script>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            <a href='../../en/'>ECVM DOCUMENTATION</a> > Actions in each step
          
        
          
        
                 
                  </span>
                </div>
                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
          <div id="chapter">
        
        <div id="body-inner">
          

        



	<h1 id="actions-in-each-step">Actions in each step</h1>
<h1 id="01-retrieve-records-from-cdm">01 RETRIEVE RECORDS FROM CDM</h1>
<h2 id="step-01_1-create-conceptset-datasets-t21">[step 01_1]: create conceptset datasets (T2.1)</h2>
<p><strong>input</strong>: VACCINES, EVENTS, MEDICINES</p>
<p><strong>parameters</strong> : concept_sets_of_our_study, ECVM_CDM_tables, ECVM_CDM_codvar, ECVM_CDM_datevar, concept_set_domains, concept_set_domains, concept_set_codes_our_study.</p>
<p><strong>output</strong>: concept set datasets, one per concept set, named after the concept set itself   (data model: it is a sequence of records from multiple tables of the Common Data Model)</p>
<p>In this step the function <a href="https://github.com/ARS-toscana/CreateConceptSetDatasets">CreateConceptSetDatasets</a> is used. The set of input tables are inspected and a group of datasets is created, each corresponding to a concept set. 
Each dataset contains the records of the input tables that match the corresponding concept set codes.</p>
<h2 id="step-01_2-create-spells-t21">[step 01_2]: create spells (T2.1)</h2>
<p><strong>input</strong>: OBSERVATION_PERIODS</p>
<p><strong>parameters</strong>: study_end, this_datasource_has_subpopulations, op_meanings_list_per_set, op_meaning_sets, subpopulations, op_meaning_sets_in_subpopulations</p>
<p><strong>output</strong>:  D3_output_spells_category , output_spells_category_meaning_set (only if the datasource has subpopulations)</p>
<p>In this step the function <a href="https://github.com/ARS-toscana/CreateSpells">CreateSpells</a> is used. It takes as input a dataset with multiple time windows per unit of observation (OBSERVATION_PERIODS). The output is a datasetof <i>spells</i>, i.e., disjoint periods of time.</p>
<h2 id="step-01_3-create-dates-from-persons-t21">[step 01_3]: create dates from PERSONS (T2.1)</h2>
<p><strong>input</strong>: PERSONS , OBSERVATION_PERIODS</p>
<p><strong>output</strong>:   D3_PERSONS, D3_events_DEATH</p>
<p>In this step birth date and date of death from PERSONS are fixed in case days or months are missing (they are not mandatory variables). Once PERSONS is corrected it is saved as D3_PERSONS. D3_events_DEATH is also created containing date of death</p>
<h2 id="step-01_4-create-prompt-and-itemset-datasets-t21">[step 01_4]: create prompt and itemset datasets (T2.1)</h2>
<p><strong>input</strong>: SURVEY_ID, SURVEY_OBSERVATIONS</p>
<p><strong>parameters</strong>: ECVM_CDM_EAV_tables_retrieve, ECVM_CDM_datevar_retrieve, dateformat, study_variable_names, itemset_AVpair_our_study_this_datasource</p>
<p><strong>output</strong>:   covid_registry</p>
<p>In this step, the set of input tables are inspected and a group of datasets is created, each corresponding to a prompt or to a itemset. 
Each dataset contains the records of the input tables that match the corresponding prompt or itemset.</p>
<h1 id="02-quality-check-for-doses">02 QUALITY CHECK FOR DOSES</h1>
<h2 id="step-02_1-create-quality-check-criteria-t2">[step 02_1]: create quality check criteria (T2)</h2>
<p><strong>input</strong>: concept set datasets</p>
<p><strong>parameters</strong> : concept_set_domains, study_years</p>
<p><strong>output</strong>: D3_concepts_QC_criteria</p>
<p>Creation of quality check criteria for vaccine doses and recoding of missing manufacturer</p>
<h2 id="step-02_2-apply-quality-check-criteria-t3">[step 02_2]: apply quality check criteria (T3)</h2>
<p><strong>input</strong>: D3_concepts_QC_criteria,</p>
<p><strong>parameters</strong> : concept_set_domains, study_years, thisdatasource</p>
<p><strong>output</strong>: Flowchart_QC_criteria, selected_doses</p>
<p>Application of the vaccine doses QC criteria. Creation of final dataset for the dosses and flowchart including the number of doses excluded by criteria</p>
<h1 id="03-create-exclusion-criteria">03 CREATE EXCLUSION CRITERIA</h1>
<h2 id="step-03_1-create-exclusion-criteria-t2">[step 03_1]: create exclusion criteria (T2)</h2>
<p><strong>input</strong>: PERSONS, OBSERVATION_PERIODS, D3_output_spells_category</p>
<p><strong>parameters</strong> : study_start, study_end, this_datasource_has_subpopulations</p>
<p><strong>output</strong>: D3_selection_criteria_doses</p>
<p>Creation of quality check criteria for D3_PERSONS, based on personal data and spells.</p>
<h2 id="step-03_2-merge-persons-concept-t2">[step 03_2]: merge persons concept (T2)</h2>
<p><strong>input</strong>: D3_selection_criteria_doses, D3_concepts_QC_criteria, output_spells_category</p>
<p><strong>parameters</strong> : study_end</p>
<p><strong>output</strong>: persons_doses</p>
<p>Merge vaccine doses information with persons. (with exclusion criteria variables)</p>
<h1 id="04-apply-exclusion-criteria">04 APPLY EXCLUSION CRITERIA</h1>
<h2 id="step-04_1-apply-exclusion-criteria-t3">[step 04_1]: apply exclusion criteria (T3)</h2>
<p><strong>input</strong>: D3_selection_criteria_doses</p>
<p><strong>parameters</strong> : this_datasource_has_subpopulations, subpopulations,</p>
<p><strong>output</strong>: Flowchart_exclusion_criteria, Flowchart_basic_exclusion_criteria, D4_study_population (data model), D4_study_source_population</p>
<p><strong>output parameters</strong>: subpopulations_non_empty</p>
<p>In this step the function CreateFlowchart is used: the selection criteria are applied and the study population is selected. A flowchart is created as a byproduct.</p>
<h2 id="step-04_2-apply-quality-checks-exclusion-criteria-t3">[step 04_2]: apply quality checks exclusion criteria (T3)</h2>
<p><strong>input</strong>: persons_doses</p>
<p><strong>parameters</strong> : this_datasource_has_subpopulations, subpopulations,</p>
<p><strong>output</strong>: Flowchart_doses, HTML_flowchart_doses</p>
<p>In this step the function CreateFlowchart is used: the selection criteria are applied and the study population is selected. A flowchart is created as a byproduct.</p>
<h1 id="05-create-study-variables">05 CREATE STUDY VARIABLES</h1>
<h2 id="step-05_1-components-t22">[step 05_1]: components (T2.2)</h2>
<p><strong>input</strong>: concept set datasets of outcomes (narrow and possible), D4_study_population, subpopulations_non_empty</p>
<p><strong>parameters</strong>: firstYearComponentAnalysis, secondYearComponentAnalysis, OUTCOME_events, this_datasource_has_subpopulations, date_format, datasources_with_specific_algorithms, exclude_meanings_from_OUTCOME</p>
<p><strong>output</strong>: for each outcome <i>OUTCOME</i>,  D3_events_<i>OUTCOME</i>_ <i>TYPE</i> and D3_components_<i>OUTCOME</i></p>
<p>In this step the function <a href="https://github.com/ARS-toscana/MergeFilterAndCollapse/wiki">MergeFilterAndCollapse</a> is used. All outcomes that occurred to the persons in the study population during the study period or during lookback are listed. Moreover, components are created for narrow and possible concept sets, for HOSP and PC meanings. Finally, datasource-tailored algorithms are implemented.</p>
<h2 id="step-05_2--create-secondary-components-t22">[step 05_2] : create secondary components (T2.2)</h2>
<p><strong>input</strong>: concept set datasets involved in secondary components, D4_study_population</p>
<p><strong>parameters</strong>: this_datasource_has_subpopulations, SECCOMPONENTS, concept_set_seccomp, rule_seccomp, distance_seccomp, direction_seccomp</p>
<p><strong>output</strong>: for each secondary component SECCOMP, D3_eventsSecondary_<i>SECCOMP</i>.RData</p>
<h2 id="step-05_3--create-events-all-outcomes-t2">[step 05_3] : create events all outcomes (T2)</h2>
<p><strong>input</strong>: D4_study_population, subpopulations_non_empty, D3_events_OUTCOME_narrow, D3_events_OUTCOME_possible, for all outcomes <i>OUTCOME</i>; conceptsets for CONTROL_events</p>
<p><strong>parameters</strong> : OUTCOMEnoCOVID, CONTROL_events, this_datasource_has_subpopulations</p>
<p><strong>output</strong>: list_outcomes_observed, D3_events_ALL_OUTCOMES</p>
<p>In this step a list containing all observed outcomes including control outcomes and excluding COVID, and a dataset is created, containing the first occurrence recorded during lookback or during study period of each outcome.</p>
<h2 id="step-05_4--code-counts-of-first-occurrence-of-outcomes-in-the-study-population-qc">[step 05_4] : code counts of first occurrence of outcomes in the study population (QC)</h2>
<p><strong>input</strong>: D4_study_population, D3_events_ALL_OUTCOMES</p>
<p><strong>parameters</strong> : this_datasource_has_subpopulations, list_outcomes_observed_only_diagnosis</p>
<p><strong>output</strong>: QC_code_counts_in_study_population_<i>OUTCOME</i>_YYYY (exported to csv)</p>
<p>This step counts the codes occurring during each year of the study period of each outcome. Only the first occurrence of each person is included</p>
<h2 id="step-05_5-apply-component-strategy-qc">[step 05_5]: apply component strategy (QC)</h2>
<p><strong>input</strong>: D4_study_population, D3_events_<i>OUTCOME</i>_<i>TYPE</i></p>
<p><strong>parameters</strong> : this_datasource_has_subpopulations, firstYearComponentAnalysis, secondYearComponentAnalysis, OUTCOME_events, date_format, subpopulations_non_empty</p>
<p><strong>output</strong>: QC_all_components_<i>OUTCOME</i></p>
<p>In this step outcomes are split in all possible components</p>
<h2 id="step-05_6-covariates-at-baseline-t22">[step 05_6]: covariates at baseline (T2.2)</h2>
<p><strong>input</strong>: D4_study_population, concept set datasets corresponding to COV_conceptssets, plus the six datasets corresponding to the concept sets of the three outcomes CAD, MYOCARD and HF, which are to be used in the covariate CV: &ldquo;CV&rdquo;,&ldquo;COVCANCER&rdquo;,&ldquo;COVCOPD&rdquo;,&ldquo;COVCKD&rdquo;,&ldquo;COVDIAB&rdquo;,&ldquo;COVOBES&rdquo;,&ldquo;COVSICKLE&rdquo;</p>
<p><strong>parameters</strong> : this_datasource_has_subpopulations, exclude_meaning_of_event, subpopulations_non_empty</p>
<p><strong>output</strong>:  D3_study_population_covariates</p>
<p>In this step the diagnostic components of the risk factors are created as presence of a diagnostic code during lookback, and added to the study population</p>
<h2 id="step-05_7-drug-proxy-at-baseline-t22">[step 05_7]: Drug Proxy at baseline (T2.2)</h2>
<p><strong>input</strong>: D4_study_population, concept set datasets in DRUGS_conceptssets (&ldquo;CV&rdquo;, &ldquo;COVCOPD&rdquo;, &ldquo;COVCKD&rdquo;, &ldquo;COVDIAB&rdquo;)</p>
<p><strong>parameters</strong> : this_datasource_has_subpopulations, DRUGS_conceptssets, subpopulations_non_empty,
<strong>output</strong>: D3_study_population_DP</p>
<p>In this step for each subject in the study population a the drug proxy component of each risk factor is created: there must be at least 2 records during 365 days of lookback.</p>
<h2 id="step-05_8-baseline-characteristics-t23">[step 05_8]: baseline characteristics (T2.3)</h2>
<p><strong>input</strong>: D4_study_population, D3_study_population_covariates, subpopulations_non_empty</p>
<p><strong>parameters</strong> : this_datasource_has_subpopulations</p>
<p><strong>output</strong>: D4_study_population_cov</p>
<p>In this step few simple covariates (age etc) are added to the study population.</p>
<h2 id="step-05_9-all-covariates-at-baseline-t23">[step 05_9]: ALL covariates at baseline (T2.3)</h2>
<p><strong>input</strong>: subpopulations_non_empty, D4_study_population, D4_study_population_cov, D3_study_population_DP</p>
<p><strong>parameters</strong> : this_datasource_has_subpopulations</p>
<p><strong>output</strong>: D3_study_population_cov_ALL</p>
<p>In this step the diagnostic and the drug proxy component of each risk factor are merged into a composite OR, and added to the study population.</p>
<h2 id="step-05_10-components-for-covid-severity-t22">[step 05_10]: components for COVID severity (T2.2)</h2>
<p><strong>input</strong>:   D4_study_population.RData, D3_events_COVID_narrow, D3_events_DEATH.RData, covid_registry, COVID_symptoms
<strong>parameters</strong>: this_datasource_has_subpopulations, subpopulations_non_empty
<strong>output</strong>:  D3_components_covid_severity</p>
<p>In this step, components to identify occurrence of covid and of its level of severity are computed based on the concept sets COVID_narrow, &ldquo;COVIDSYMPTOM&rdquo;,&ldquo;ARD_narrow&rdquo;,&ldquo;ARD_possible&rdquo;, and &lsquo;MechanicalVent&rsquo;, and possibly on the records of covid registry, if available in the data source</p>
<h2 id="step-05_11-algorithms-for-covid-severity-t23">[step 05_11]: algorithms for COVID severity (T2.3)</h2>
<p><strong>input</strong>:   # input: D3_components_covid_severity.RData, D4_study_population.RData</p>
<p><strong>parameters</strong>: this_datasource_has_subpopulations, subpopulations_non_empty</p>
<p><strong>output</strong>:  D3_algorithm_covid, D3_outcomes_covid</p>
<p>In this step, the components created in the previous step are combined to obtain levels of covid severity</p>
<h1 id="06-create-d3-for-doses-and-coverage">06 CREATE D3 FOR DOSES AND COVERAGE</h1>
<h2 id="step-06-create-d3-datasetst2">[step 06]: create D3 datasets(T2)</h2>
<p><strong>input</strong>: D4_study_population, selected_doses, D3_outcomes_covid</p>
<p><strong>parameters</strong>: thisdatasource</p>
<p><strong>output</strong>: D3_study_population, D3_Vaccin_cohort, D3_studyweeks, D3_vaxweeks, D3_vaxweeks_including_not_vaccinated</p>
<p>Creation of all D3 datasets present in the SAP document.</p>
<h1 id="07-create-d4-risk-and-benefit">07 CREATE D4 RISK AND BENEFIT</h1>
<h2 id="step-07_1-create-person-time-for-risks-t3">[step 07_1]: create person time for risks (T3)</h2>
<p><strong>input</strong>: D3_vaxweeks_including_not_vaccinated, D3_events_ALL_OUTCOMES</p>
<p><strong>parameters</strong> : this_datasource_has_subpopulations, subpopulations_non_empty, list_outcomes_observed</p>
<p><strong>output</strong>: D4_persontime_risk_week</p>
<p>In this step the function <a href="https://github.com/IMI-ConcePTION/CountPersonTime/wiki">CountPersonTime</a> is used. The output contains persontime and counts of all outcomes, measured both as narrow and as broad.</p>
<h2 id="step-07_2-create-person-time-risks-year-t3">[step 07_2]: create person time risks year (T3)</h2>
<p><strong>input</strong>: D3_vaxweeks_including_not_vaccinated, D3_events_ALL_OUTCOMES</p>
<p><strong>parameters</strong> : this_datasource_has_subpopulations, subpopulations_non_empty, list_outcomes_observed</p>
<p><strong>output</strong>: D4_persontime_risk_year</p>
<p>In this step the function <a href="https://github.com/IMI-ConcePTION/CountPersonTime/wiki">CountPersonTime</a> is used. The output contains persontime and counts of all outcomes, measured both as narrow and as broad.</p>
<h2 id="step-07_3-create-person-time-for-benefit-t3">[step 07_3]: create person time for benefit (T3)</h2>
<p><strong>input</strong>: D3_vaxweeks_including_not_vaccinated, D3_outcomes_covid</p>
<p><strong>parameters</strong> : this_datasource_has_subpopulations, subpopulations_non_empty, list_outcomes_observed_COVID</p>
<p><strong>output</strong>: D4_persontime_benefit_week</p>
<p>In this step the function <a href="https://github.com/IMI-ConcePTION/CountPersonTime/wiki">CountPersonTime</a> is used. The output contains persontime and counts of the levels of covid.</p>
<h2 id="step-07_4-create-person-time-benefits-year-t3">[step 07_4]: create person time benefits year (T3)</h2>
<p><strong>input</strong>: D3_vaxweeks_including_not_vaccinated, D3_outcomes_covid</p>
<p><strong>parameters</strong> : this_datasource_has_subpopulations, subpopulations_non_empty, list_outcomes_observed_COVID</p>
<p><strong>output</strong>: D4_persontime_benefit_year</p>
<p>In this step the function <a href="https://github.com/IMI-ConcePTION/CountPersonTime/wiki">CountPersonTime</a> is used. The output contains persontime and counts of the levels of covid.</p>
<h2 id="step-07_5-aggregate-sex-birth-cohort-t3">[step 07_5]: aggregate sex birth cohort (T3)</h2>
<p><strong>input</strong>: D4_persontime_risk_week, D4_persontime_benefit_week, D4_persontime_risk_year, D4_persontime_benefit_year</p>
<p><strong>output</strong>: D4_persontime_risk_week_BC, D4_persontime_benefit_week_BC, D4_persontime_risk_year_BC, D4_persontime_benefit_year_BC</p>
<p>Aggregating the data for birth_coohort and sex</p>
<h2 id="step-07_6-aggregate-sex-risk-factor-t3">[step 07_6]: aggregate sex risk factor (T3)</h2>
<p><strong>input</strong>: D4_persontime_risk_week, D4_persontime_benefit_week, D4_persontime_risk_year, D4_persontime_benefit_year</p>
<p><strong>output</strong>: D4_persontime_risk_week_RF, D4_persontime_benefit_week_RF, D4_persontime_risk_year_RF, D4_persontime_benefit_year_RF</p>
<p>Aggregating the data for risk_factors</p>
<h2 id="step-07_7-create-person-time-vax-cohort-t3">[step 07_7]: create person time vax cohort (T3)</h2>
<p><strong>input</strong>: D3_events_ALL_OUTCOMES, D3_vaxweeks_vaccin_cohort</p>
<p><strong>parameters</strong> : this_datasource_has_subpopulations, subpopulations_non_empty, list_outcomes_observed</p>
<p><strong>output</strong>: D4_persontime_risk_month</p>
<p>In this step the function <a href="https://github.com/IMI-ConcePTION/CountPersonTime/wiki">CountPersonTime</a> is used. The output contains monthly persontime and counts of the levels of covid for the vaccinated cohort.</p>
<h2 id="step-07_8-aggregate-monthly-t3">[step 07_8]: aggregate monthly (T3)</h2>
<p><strong>input</strong>: D4_persontime_risk_month</p>
<p><strong>output</strong>: D4_persontime_risk_month_RFBC</p>
<p>Aggregating the monthly data for risk_factors and birth cohort.</p>
<h1 id="08-calculate-the-incidence-rates">08 CALCULATE THE INCIDENCE RATES</h1>
<h2 id="step-08_1-ir-t4">[step 08_1]: IR (T4)</h2>
<p><strong>input</strong>: D4_persontime_risk_week_BC, D4_persontime_benefit_week_BC, D4_persontime_risk_year_BC, D4_persontime_benefit_year_BC, D4_persontime_risk_week_RF, D4_persontime_benefit_week_RF, D4_persontime_risk_year_RF, D4_persontime_benefit_year_RF, D4_persontime_risk_month_RFBC</p>
<p><strong>parameters</strong> : list_outcomes_observed</p>
<p><strong>output</strong>: D4_IR_benefit_week_BC, D4_IR_benefit_fup_BC, D4_IR_risk_week_BC, D4_IR_risk_fup_BC, D4_IR_benefit_week_RF, D4_IR_benefit_fup_RF, D4_IR_risk_week_RF, D4_IR_risk_fup_RF, D4_persontime_ALL_OUTCOMES</p>
<p>Calculate the incidence rates for birth cohorts and risk factors datasets for both risk and benefit</p>
<h1 id="09-analysis-descriptive-tables-and-dashboard-tables-for-doses-coverage-risk-and-benefit">09 ANALYSIS: DESCRIPTIVE TABLES AND DASHBOARD TABLES FOR DOSES, COVERAGE, RISK AND BENEFIT</h1>
<h2 id="step-09_1-create-d4_doses_weeks-t3">[step 09_1]: create D4_doses_weeks (T3)</h2>
<p><strong>input</strong>: D3_studyweeks</p>
<p><strong>parameters</strong> : study_start, study_end</p>
<p><strong>output</strong>: D4_doses_weeks</p>
<p>Creation of D4_doses_weeks dataset starting from D3_studyweeks</p>
<h2 id="step-09_2-create-descriptive-tables-t4">[step 09_2]: create descriptive tables (T4)</h2>
<p><strong>input</strong>: D3_study_population, D3_Vaccin_cohort, D3_study_population_cov_ALL</p>
<p><strong>output</strong>: D4_descriptive_dataset_age_studystart, D4_descriptive_dataset_ageband_studystart, D4_descriptive_dataset_sex_studystart, D4_descriptive_dataset_covariate_studystart, D4_followup_fromstudystart, D4_descriptive_dataset_age_vax1, D4_descriptive_dataset_ageband_vax, D4_descriptive_dataset_sex_vaccination, D4_followup_from_vax, Density_plot_distance_doses, Histogram_distance_doses, D4_distance_doses</p>
<p>Create the remaining D4 datasets and tables described in the SAP.</p>
<h2 id="step-09_3-create-dashboard-tables-for-doses-and-coverage-t4">[step 09_3]: create dashboard tables for doses and coverage (T4)</h2>
<p><strong>input</strong>: D3_vaxweeks, D3_Vaccin_cohort, D3_study_population, D3_study_population_cov_ALL, D4_IR_benefit_week_BC, D4_IR_benefit_fup_BC, D4_IR_benefit_week_RF, D4_IR_benefit_fup_RF, D4_IR_risk_week_BC, D4_IR_risk_fup_BC, D4_IR_risk_week_RF, D4_IR_risk_fup_RF</p>
<p><strong>parameters</strong> : list_outcomes_observed</p>
<p><strong>output</strong>: DOSES_BIRTHCOHORTS, COVERAGE_BIRTHCOHORTS, DOSES_RISKFACTORS, COVERAGE_RISKFACTORS, BENEFIT_BIRTHCOHORTS_CALENDARTIME, BENEFIT_BIRTHCOHORTS_TIMESINCEVACCINATION, BENEFIT_RISKFACTORS_CALENDARTIME, BENEFIT_RISKFACTORS_TIMESINCEVACCINATION, RISK_BIRTHCOHORTS_CALENDARTIME, RISK_BIRTHCOHORTS_TIMESINCEVACCINATION, RISK_RISKFACTORS_CALENDARTIME, RISK_RISKFACTORS_TIMESINCEVACCINATION</p>
<p>Creation of all dashboard tables (excluding dummy tables)</p>
<h1 id="10-create-html-files-that-describe-datasets">10 CREATE HTML FILES THAT DESCRIBE DATASETS</h1>
<h2 id="step-10_1-flowchart-description-t4">[step 10_1]: FlowChart description (T4)</h2>
<p><strong>input</strong>: Flowchart_doses</p>
<p><strong>output</strong>: HTML_Flowchart_doses_description</p>
<h2 id="step-10_2-coverage-description-t4">[step 10_2]: Coverage description (T4)</h2>
<p><strong>input</strong>: COVERAGE_BIRTHCOHORTS</p>
<p><strong>output</strong>: HTML_COVERAGE_BIRTHCOHORTS_description</p>
<h2 id="step-10_3-doses-description-t4">[step 10_3]: Doses description (T4)</h2>
<p><strong>input</strong>: DOSES_BIRTHCOHORTS</p>
<p><strong>output</strong>: HTML_DOSES_BIRTHCOHORTS_description</p>
<h2 id="step-10_4-benefit-description-t4">[step 10_4]: benefit description (T4)</h2>
<p><strong>input</strong>: BENEFIT_BIRTHCOHORTS_CALENDARTIME, BENEFIT_BIRTHCOHORTS_TIMESINCEVACCINATION</p>
<p><strong>output</strong>: HTML_benefit_description</p>
<h1 id="11-analysis-descriptive-tables-and-dashboard-tables-for-doses-coverage-risk-and-benefit">11 ANALYSIS: DESCRIPTIVE TABLES AND DASHBOARD TABLES FOR DOSES, COVERAGE, RISK AND BENEFIT</h1>
<h2 id="step-11-create_dummy_tables-t4">[step 11]: create_dummy_tables (T4)</h2>
<p><strong>input</strong>: Flowchart_basic_exclusion_criteria, Flowchart_exclusion_criteria, D4_descriptive_dataset_ageband_studystart, D4_descriptive_dataset_age_studystart, D4_followup_fromstudystart, D4_descriptive_dataset_sex_studystart, D4_descriptive_dataset_covariate_studystart</p>
<p><strong>output</strong>: Attrition diagram 1, Attrition diagram 2, Cohort characteristics at start of study (1-1-2020), Cohort characteristics at first COVID-19 vaccination, Doses of COVID-19 vaccines and distance between first and second dose, Number of incident cases entire study period, Code counts for narrow definitions (for each event) separately, Incidence of AESI (narrow) per 100,000 PY by calendar month in 2020, Incidence of AESI (narrow) per 100,000 PY by age in 2020, Incidence of AESI (narrow) per 100,000 PY by age &amp; sex in 2020, Incidence of AESI (narrow) per 100,000 PY by age &amp; sex in 2020, Incidence of AESI (narrow) per 100,000 PY by month in 2021 (non-vaccinated), Incidence of AESI (narrow) per 100,000 PY by week since vaccination</p>
<p>Creation of dummy tables present in SAP.</p>





<footer class=" footline" >
	
</footer>

        
            </div> 
        
        </div>
        

      </div>

    <div id="navigation">
        
        

        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        

        


	 
	 
		
			<a class="nav nav-prev" href="../../en/structure-of-the-script/" title="Structure of the script"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="../../en/parameters/" title="Parameters" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="../../js/clipboard.min.js?1644326232"></script>
    <script src="../../js/perfect-scrollbar.min.js?1644326232"></script>
    <script src="../../js/perfect-scrollbar.jquery.min.js?1644326232"></script>
    <script src="../../js/jquery.sticky.js?1644326232"></script>
    <script src="../../js/featherlight.min.js?1644326232"></script>
    <script src="../../js/highlight.pack.js?1644326232"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="../../js/modernizr.custom-3.6.0.js?1644326232"></script>
    <script src="../../js/learn.js?1644326232"></script>
    <script src="../../js/hugo-learn.js?1644326232"></script>
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-105947713-1', 'auto');
  ga('send', 'pageview');

</script>
  </body>
</html>
